<html>



<body>



<form onsubmit="saveToLocalStorage(event)">



<label> Chooseexpenseamount</label>



<input type="amount"name="Chooseexpenseamount" required/>



<label> Choosedescription</label>



<input type="description"name="Choosedescription" ="" required/>







<type href="#">ChooseaCategory <i class="fas fa-caret-down"></i> </a>

</div>
<select class="form-control" aria-describedby="basic-addon1" data-toggle="'tooltip"
title="ChooseaCategory">
<option> Select Here </option>
<option> Fuel</option>
<option> Warranty</option>
<option> Move</option>
</select>


</div>





<button> AddExpenses </button>



</form>



<ul id="listOfUsers"></ul>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.1.3/axios.min.js"></script>

    <script>
      function saveToLocalStorage(event){
      event.preventDefault();
      const name= event.target.Chooseaexpenseamount.value;

      const email=event.target.Choosedescription.value;

      const phonenumber = event.target.ChooseaCategory.value;

      localStorage.setItem('Chooseaexpenseamount', Chooseaexpenseamount);

      localStorage.setItem('Choosedescription', Choosedescription);

      localStorage.setItem('ChooseaCategory', ChooseaCategory)

      const obj = {

      Chooseaexpenseamount,

      Choosedescription,

      ChooseaCategory,

      }
    
                localStorage.setItem(obj.Chooseaexpenseamount, JSON.stringify(obj))
                showNewUserOnScreen(obj)
            }

      axios.post("https://crudcrud.com/api/a8d7ac3bfd024e97b10a05135ba37bcb/Appointmentdata", obj)

      .then((response) => {

      showNewUserOnScreen(response.data)

      })

      .catch((err)=> {

      console.log(err)

      })
        window.addEventListener("DOMContentLoaded", () => {
                const localStorageObj = localStorage;
                const localstoragekeys  = Object.keys(localStorageObj)

                for(var i =0; i< localstoragekeys.length; i++){
                    const key = localstoragekeys[i]
                    const userDetailsString = localStorageObj[key];
                    const userDetailsObj = JSON.parse(userDetailsString);
                    showNewUserOnScreen(userDetailsObj)
                }
            })
        function showNewUserOnScreen(user){
            const parentNode = document.getElementById('listOfUsers');
                const childHTML = `<li id=${Chooseaexpenseamount}> ${Choosedescription} - ${Chooseaexpenseamount}
                                        <button onclick=deleteUser('${Chooseaexpenseamount}')> Delete User </button>
                                     </li>`
                parentNode.innerHTML = parentNode.innerHTML + childHTML;
            }

            // deleteUser('abc@gmail.com')

            function deleteUser(Expenses){
                console.log(Expenses)
                localStorage.removeItem(Expenses);
                removeUserFromScreen(Expenses);

            }

            function removeUserFromScreen(Expenses){
                const parentNode = document.getElementById('listOfUsers');
                const childNodeToBeDeleted = document.getElementById(Expenses);

                parentNode.removeChild(childNodeToBeDeleted)
            }







        </script>


    </body>
    </html>